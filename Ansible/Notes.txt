ðŸš€ Step 2: Ansible Configuration â€“ Setup EC2 with Node.js App
ðŸŽ¯ Goal:
Use Ansible to:
    SSH into EC2s (through Bastion)
    Install Node.js, npm, and other packages
    Set up environment variables
    Configure systemd service for your app
    Start your backend app (connected to RDS and Redis)

ansible/
â”œâ”€â”€ ansible.cfg
â”œâ”€â”€ inventory
â”œâ”€â”€ site.yml
â””â”€â”€ roles/
    
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ tasks/
    â”‚   â”‚   â””â”€â”€ main.yml
    â”‚   â”œâ”€â”€ templates/
    â”‚   â”‚   â””â”€â”€ app.service.j2
    â”‚   â””â”€â”€ files/
    â”‚       â””â”€â”€ your-app-code/  

    â”œâ”€â”€ reverse_proxy/
    â”‚   â”œâ”€â”€ tasks/
    â”‚   â”‚   â””â”€â”€ main.yml
    â”‚   â”œâ”€â”€ templates/
    â”‚   â”‚   â””â”€â”€ nginx.conf.j2

    â””â”€â”€ jenkins/
        â”œâ”€â”€ tasks/
        â”‚   â””â”€â”€ main.yml
        â”œâ”€â”€ templates/
        â”‚   â””â”€â”€ docker-compose.yml.j2
        â””â”€â”€ files/
            â””â”€â”€ Dockerfile
            
ðŸŸ¦ 1. Bastion Host
ðŸ”¹ Purpose: Provide SSH access to private EC2s
ðŸ”§ Needs:
    Nothing special to configure (just SSH)
    Should not install anything with Ansible
    Used only in Ansible via ProxyCommand
    Handled automatically in ansible.cfg or inventory

ðŸŸ© 2. Reverse Proxy EC2 (NGINX)
ðŸ”¹ Purpose: Receive traffic from Public ALB and route it to backend EC2s
ðŸ”§ Needs:
    Install NGINX
    Add NGINX config with reverse proxy logic pointing to backend instances
    Reload NGIN
    Ansible Role: roles/reverse_proxy

ðŸŸ¨ 3. Backend EC2s (Node.js App)
ðŸ”¹ Purpose: Host your backend Node.js app
ðŸ”§ Needs:
    Install Node.js + npm
    Copy your app code
    Set environment variables for:
    DB_HOST = RDS endpoint
    REDIS_HOST = ElastiCache endpoint
    Run with systemd service (app.service)
    Ansible Role: roles/backend (already discussed)

ðŸŸ¥ 4. Jenkins EC2 (Optional)
ðŸ”¹ Purpose: Run CI/CD pipeline
    Build Docker image of your app
    Test it
    Deploy it via Ansible or GitOps
    ðŸ”§ Needs:
    Install Docker
    Install Jenkins in Docker
    Mount Docker socket
    Open ports (e.g., 8080)
    Setup job to pull from GitHub and run Ansible
    Ansible Role: roles/jenkins
